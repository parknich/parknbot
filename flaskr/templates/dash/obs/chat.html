<!DOCTYPE html>
<link rel="stylesheet" href="{{ url_for('static', filename='chat.css') }}">
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<section class="content">
  <title>{% block title %}{% endblock %} - parknBot</title>
  {% block content %}
  <p id="label">Chat</p>
  <p id="chat"></p>

  <script>
    var chat = ["Joined the chatroom"];
    function updateChatArray() {
      // Make an AJAX request to get the updated chat array
      $.ajax({
        url: '/dash/obs/chat',
        method: 'GET',
        dataType: 'json',
        success: function(response) {
          var chat = response.chatList;

          // Update the chat paragraph with the contents of the chat array
          $('#chat').html(chat.join('<br>'));
        },
        error: function(error) {
          console.error('Error updating chat:', error);
        }
      });
    }

    // Call the function initially
    updateChatArray();

    // You might want to set up a timer to periodically update the chat
    setInterval(updateChatArray, 1000);  // Update every 5 seconds, for example
  </script>
  {% endblock %}
</section>
