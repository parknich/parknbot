<!DOCTYPE html>
<link rel="stylesheet" href="{{ url_for('static', filename='queue.css') }}">
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<section class="content">
  <header>
    <title>{% block title %}{% endblock %} - parknBot</title>
    {% block header %}Users in queue:{% endblock %}
  </header>

  {% block content %}
  <p id="user-list">
  </p>
  <script>
    function updateUserList() {
      // Make an AJAX request to get the updated user list
      $.ajax({
        url: '/dash/queue',
        method: 'GET',  // You might need to change this to 'POST' depending on your application
        dataType: 'json',
        success: function(response) {
          // Update the user list on the page
          $('#user-list').html(response.users.join('<br>'));
        },
        error: function(error) {
          console.error('Error updating user list:', error);
        }
      });
    }

    // Call the function initially
    updateUserList();

    // You might want to set up a timer to periodically update the user list
    setInterval(updateUserList, 1000);  // Update every 5 seconds, for example
  </script>
  {% endblock %}
</section>
